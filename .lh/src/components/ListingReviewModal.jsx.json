{
    "sourceFile": "src/components/ListingReviewModal.jsx",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 0,
            "patches": [
                {
                    "date": 1766939181372,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                }
            ],
            "date": 1766939181372,
            "name": "Commit-0",
            "content": "import { useEffect, useState } from \"react\";\n\nexport default function ListingReviewModal({\n  open,\n  onClose,\n  loading,\n  listing,\n  onApprove,\n  onReject,\n  actionLoading,\n}) {\n  const [reason, setReason] = useState(\"\");\n\n  useEffect(() => {\n    if (open) setReason(\"\");\n  }, [open]);\n\n  if (!open) return null;\n\n  return (\n    <>\n      <div className=\"modal fade show\" style={{ display: \"block\" }} tabIndex=\"-1\">\n        <div className=\"modal-dialog modal-lg modal-dialog-scrollable\">\n          <div className=\"modal-content rounded-4\">\n            <div className=\"modal-header\">\n              <h5 className=\"modal-title fw-bold\">\n                Review Listing\n              </h5>\n              <button className=\"btn-close\" onClick={onClose} />\n            </div>\n\n            <div className=\"modal-body\">\n              {loading ? (\n                <div className=\"text-muted\">Loading…</div>\n              ) : !listing ? (\n                <div className=\"alert alert-warning mb-0\">No listing found.</div>\n              ) : (\n                <div className=\"d-flex flex-column gap-3\">\n                  <div>\n                    <div className=\"text-muted small\">Title</div>\n                    <div className=\"fw-bold fs-5\">{listing.title}</div>\n                  </div>\n\n                  <div className=\"row g-3\">\n                    <div className=\"col-md-4\">\n                      <div className=\"text-muted small\">Type</div>\n                      <div className=\"fw-semibold\">{listing?.type?.name || \"—\"}</div>\n                    </div>\n                    <div className=\"col-md-4\">\n                      <div className=\"text-muted small\">Status</div>\n                      <span className={`badge ${listing.status === \"pending\" ? \"bg-warning\" : listing.status === \"approved\" ? \"bg-success\" : \"bg-danger\"}`}>\n                        {listing.status}\n                      </span>\n                    </div>\n                    <div className=\"col-md-4\">\n                      <div className=\"text-muted small\">Created</div>\n                      <div className=\"fw-semibold\">\n                        {listing.createdAt ? new Date(listing.createdAt).toLocaleString() : \"—\"}\n                      </div>\n                    </div>\n                  </div>\n\n                  <div>\n                    <div className=\"text-muted small\">Publisher</div>\n                    <div className=\"fw-semibold\">\n                      {listing?.publisherId?.companyName || \"—\"}{\" \"}\n                      <span className=\"text-muted\">\n                        ({listing?.publisherId?.userId?.email || \"—\"})\n                      </span>\n                    </div>\n                  </div>\n\n                  <div>\n                    <div className=\"text-muted small\">Description</div>\n                    <div className=\"bg-light rounded-3 p-3\">\n                      {listing.description}\n                    </div>\n                  </div>\n\n                  <div className=\"row g-3\">\n                    <div className=\"col-md-6\">\n                      <div className=\"text-muted small\">Location</div>\n                      <div className=\"fw-semibold\">{listing.location || \"—\"}</div>\n                    </div>\n                    <div className=\"col-md-6\">\n                      <div className=\"text-muted small\">Deadline</div>\n                      <div className=\"fw-semibold\">\n                        {listing.deadline ? new Date(listing.deadline).toLocaleDateString() : \"—\"}\n                      </div>\n                    </div>\n                    <div className=\"col-md-6\">\n                      <div className=\"text-muted small\">Start Date</div>\n                      <div className=\"fw-semibold\">\n                        {listing.startDate ? new Date(listing.startDate).toLocaleDateString() : \"—\"}\n                      </div>\n                    </div>\n                    <div className=\"col-md-6\">\n                      <div className=\"text-muted small\">End Date</div>\n                      <div className=\"fw-semibold\">\n                        {listing.endDate ? new Date(listing.endDate).toLocaleDateString() : \"—\"}\n                      </div>\n                    </div>\n                  </div>\n\n                  <div>\n                    <div className=\"text-muted small mb-1\">Attachments</div>\n                    {!listing.attachments?.length ? (\n                      <div className=\"text-muted\">No attachments</div>\n                    ) : (\n                      <div className=\"d-flex flex-wrap gap-2\">\n                        {listing.attachments.map((a, idx) => (\n                          <a\n                            key={a.publicId || idx}\n                            href={a.url}\n                            target=\"_blank\"\n                            rel=\"noreferrer\"\n                            className=\"btn btn-outline-secondary btn-sm\"\n                          >\n                            <i className=\"bi bi-paperclip me-1\" />\n                            Attachment {idx + 1}\n                          </a>\n                        ))}\n                      </div>\n                    )}\n                  </div>\n\n                  <div>\n                    <div className=\"text-muted small\">Rejection reason (if rejecting)</div>\n                    <textarea\n                      className=\"form-control\"\n                      rows={3}\n                      placeholder=\"Write reason for rejection…\"\n                      value={reason}\n                      onChange={(e) => setReason(e.target.value)}\n                    />\n                  </div>\n                </div>\n              )}\n            </div>\n\n            <div className=\"modal-footer\">\n              <button className=\"btn btn-light border\" onClick={onClose} disabled={actionLoading}>\n                Close\n              </button>\n\n              <button\n                className=\"btn btn-danger\"\n                disabled={actionLoading || loading || !listing}\n                onClick={() => onReject(reason)}\n              >\n                {actionLoading ? \"Processing…\" : \"Reject\"}\n              </button>\n\n              <button\n                className=\"btn btn-success\"\n                disabled={actionLoading || loading || !listing}\n                onClick={onApprove}\n              >\n                {actionLoading ? \"Processing…\" : \"Approve\"}\n              </button>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      {/* Backdrop */}\n      <div className=\"modal-backdrop fade show\" onClick={onClose} />\n    </>\n  );\n}\n"
        }
    ]
}