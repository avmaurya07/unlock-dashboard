{
    "sourceFile": "src/components/ExtendSubscriptionModal.jsx",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 0,
            "patches": [
                {
                    "date": 1766940792330,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                }
            ],
            "date": 1766940792330,
            "name": "Commit-0",
            "content": "import { useEffect, useState } from \"react\";\n\nexport default function ExtendSubscriptionModal({\n  open,\n  onClose,\n  publisher,\n  actionLoading,\n  onSubmit,\n}) {\n  const [mode, setMode] = useState(\"months\"); // months | days | setExpiry\n  const [months, setMonths] = useState(3);\n  const [days, setDays] = useState(7);\n  const [setExpiry, setSetExpiry] = useState(\"\");\n\n  useEffect(() => {\n    if (!open) return;\n    setMode(\"months\");\n    setMonths(3);\n    setDays(7);\n    setSetExpiry(\"\");\n  }, [open]);\n\n  if (!open) return null;\n\n  const submit = () => {\n    if (!publisher?._id) return;\n\n    if (mode === \"months\") return onSubmit({ months });\n    if (mode === \"days\") return onSubmit({ days });\n    if (mode === \"setExpiry\") {\n      if (!setExpiry) return;\n      return onSubmit({ setExpiry });\n    }\n  };\n\n  const expiryText = publisher?.subscriptionExpiry\n    ? new Date(publisher.subscriptionExpiry).toLocaleDateString()\n    : \"—\";\n\n  return (\n    <>\n      <div className=\"modal fade show\" style={{ display: \"block\" }} tabIndex=\"-1\">\n        <div className=\"modal-dialog\">\n          <div className=\"modal-content rounded-4\">\n            <div className=\"modal-header\">\n              <h5 className=\"modal-title fw-bold\">Extend Subscription</h5>\n              <button className=\"btn-close\" onClick={onClose} disabled={actionLoading} />\n            </div>\n\n            <div className=\"modal-body\">\n              <div className=\"mb-3\">\n                <div className=\"text-muted small\">Publisher</div>\n                <div className=\"fw-semibold\">\n                  {publisher?.companyName || \"—\"}{\" \"}\n                  <span className=\"text-muted\">\n                    ({publisher?.userId?.email || \"—\"})\n                  </span>\n                </div>\n                <div className=\"text-muted small\">\n                  Current Expiry: <span className=\"fw-semibold\">{expiryText}</span>\n                </div>\n              </div>\n\n              <div className=\"mb-3\">\n                <label className=\"form-label small text-muted\">Mode</label>\n                <select\n                  className=\"form-select\"\n                  value={mode}\n                  onChange={(e) => setMode(e.target.value)}\n                >\n                  <option value=\"months\">Add months (3 / 6 / 9)</option>\n                  <option value=\"days\">Add custom days</option>\n                  <option value=\"setExpiry\">Set expiry date</option>\n                </select>\n              </div>\n\n              {mode === \"months\" && (\n                <div className=\"mb-3\">\n                  <label className=\"form-label small text-muted\">Plan months</label>\n                  <select\n                    className=\"form-select\"\n                    value={months}\n                    onChange={(e) => setMonths(Number(e.target.value))}\n                  >\n                    <option value={3}>3 months</option>\n                    <option value={6}>6 months</option>\n                    <option value={9}>9 months</option>\n                  </select>\n                </div>\n              )}\n\n              {mode === \"days\" && (\n                <div className=\"mb-3\">\n                  <label className=\"form-label small text-muted\">Days to add</label>\n                  <input\n                    type=\"number\"\n                    className=\"form-control\"\n                    min={1}\n                    value={days}\n                    onChange={(e) => setDays(Number(e.target.value))}\n                  />\n                </div>\n              )}\n\n              {mode === \"setExpiry\" && (\n                <div className=\"mb-3\">\n                  <label className=\"form-label small text-muted\">Set expiry date</label>\n                  <input\n                    type=\"date\"\n                    className=\"form-control\"\n                    value={setExpiry}\n                    onChange={(e) => setSetExpiry(e.target.value)}\n                  />\n                  <div className=\"text-muted small mt-1\">\n                    This overrides current expiry.\n                  </div>\n                </div>\n              )}\n            </div>\n\n            <div className=\"modal-footer\">\n              <button className=\"btn btn-light border\" onClick={onClose} disabled={actionLoading}>\n                Cancel\n              </button>\n              <button className=\"btn btn-success\" onClick={submit} disabled={actionLoading || (mode === \"setExpiry\" && !setExpiry)}>\n                {actionLoading ? \"Updating…\" : \"Update\"}\n              </button>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      <div className=\"modal-backdrop fade show\" onClick={onClose} />\n    </>\n  );\n}\n"
        }
    ]
}