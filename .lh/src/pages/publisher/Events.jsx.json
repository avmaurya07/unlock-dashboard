{
    "sourceFile": "src/pages/publisher/Events.jsx",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 2,
            "patches": [
                {
                    "date": 1767933428092,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1767934820089,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,176 +1,244 @@\n import { useEffect, useMemo, useState } from \"react\";\n+import axios from \"axios\";\n import { ToastContainer, toast } from \"react-toastify\";\n-import \"react-toastify/dist/ReactToastify.css\";\n \n-// If you already have axios client, use that.\n-// Otherwise install axios: npm i axios\n-import axios from \"axios\";\n+const API_BASE =\n+  import.meta.env.VITE_API_URL?.replace(/\\/$/, \"\") || \"http://localhost:5000\";\n \n-const PAGE_SIZE = 8;\n+function getToken() {\n+  // keep it flexible\n+  return (\n+    localStorage.getItem(\"token\") ||\n+    localStorage.getItem(\"accessToken\") ||\n+    localStorage.getItem(\"jwt\") ||\n+    \"\"\n+  );\n+}\n \n export default function Events() {\n   const [loading, setLoading] = useState(false);\n+\n+  // list state\n   const [events, setEvents] = useState([]);\n+  const [total, setTotal] = useState(0);\n+  const [pages, setPages] = useState(1);\n \n-  const [search, setSearch] = useState(\"\");\n-  const [status, setStatus] = useState(\"all\");\n+  // filters\n+  const [status, setStatus] = useState(\"all\"); // all|pending|approved|rejected\n+  const [q, setQ] = useState(\"\");\n   const [page, setPage] = useState(1);\n+  const [limit, setLimit] = useState(10);\n \n+  // modal state\n   const [showModal, setShowModal] = useState(false);\n+  const [creating, setCreating] = useState(false);\n \n-  // ✅ fetch events\n-  useEffect(() => {\n-    fetchEvents();\n-    // eslint-disable-next-line\n+  // create form\n+  const [form, setForm] = useState({\n+    title: \"\",\n+    description: \"\",\n+    location: \"\",\n+    startDate: \"\",\n+    endDate: \"\",\n+    deadline: \"\",\n+  });\n+\n+  const authHeaders = useMemo(() => {\n+    const token = getToken();\n+    return token ? { Authorization: `Bearer ${token}` } : {};\n   }, []);\n \n-  async function fetchEvents() {\n+  async function fetchEvents(override = {}) {\n+    setLoading(true);\n     try {\n-      setLoading(true);\n-\n-      /**\n-       * ✅ IMPORTANT: Endpoint you can adjust later\n-       * Option A (recommended): GET /api/publisher/listings?type=event\n-       * Option B: GET /api/listings/my?type=event\n-       */\n-      const res = await axios.get(\"http://localhost:5000/api/publisher/dashboard/events\", {\n-        headers: {\n-          // If you are using auth token:\n-          Authorization: `Bearer ${localStorage.getItem(\"token\") || \"\"}`,\n+      const res = await axios.get(`${API_BASE}/api/publisher/dashboard/events`, {\n+        headers: authHeaders,\n+        params: {\n+          status: override.status ?? status,\n+          q: override.q ?? q,\n+          page: override.page ?? page,\n+          limit: override.limit ?? limit,\n         },\n       });\n \n-      const list = res.data?.events || res.data?.data || [];\n-      setEvents(list);\n+      if (!res.data?.success) throw new Error(\"Request failed\");\n+\n+      setEvents(res.data.events || []);\n+      setTotal(res.data.total || 0);\n+      setPages(res.data.pages || 1);\n     } catch (err) {\n-      // fallback sample so UI stays visible\n-      setEvents(sampleEvents);\n-      toast.error(\"Could not load events from API. Showing sample data.\");\n+      const msg =\n+        err?.response?.data?.message ||\n+        err?.message ||\n+        \"Failed to load events\";\n+      toast.error(msg);\n+\n+      // Optional: if token invalid, kick to login\n+      if (err?.response?.status === 401) {\n+        // window.location.href = \"/\";\n+      }\n     } finally {\n       setLoading(false);\n     }\n   }\n \n-  // ✅ filtering + search\n-  const filtered = useMemo(() => {\n-    const q = search.trim().toLowerCase();\n+  useEffect(() => {\n+    fetchEvents();\n+    // eslint-disable-next-line react-hooks/exhaustive-deps\n+  }, [status, page, limit]);\n \n-    return events\n-      .filter((e) => (status === \"all\" ? true : (e.status || \"pending\") === status))\n-      .filter((e) => {\n-        if (!q) return true;\n-        return (\n-          (e.title || \"\").toLowerCase().includes(q) ||\n-          (e.location || \"\").toLowerCase().includes(q)\n-        );\n-      });\n-  }, [events, status, search]);\n+  // search on enter / button\n+  function onSearch() {\n+    setPage(1);\n+    fetchEvents({ page: 1, q });\n+  }\n \n-  // ✅ pagination\n-  const totalPages = Math.max(1, Math.ceil(filtered.length / PAGE_SIZE));\n-  const paged = useMemo(() => {\n-    const start = (page - 1) * PAGE_SIZE;\n-    return filtered.slice(start, start + PAGE_SIZE);\n-  }, [filtered, page]);\n-\n-  // reset page when filters change\n-  useEffect(() => {\n+  function onReset() {\n+    setStatus(\"all\");\n+    setQ(\"\");\n     setPage(1);\n-  }, [search, status]);\n+    setLimit(10);\n+    // fetch will auto run because of deps, but call once for q reset:\n+    fetchEvents({ status: \"all\", q: \"\", page: 1, limit: 10 });\n+  }\n \n-  async function handleCreateEvent(payload) {\n+  function openModal() {\n+    setForm({\n+      title: \"\",\n+      description: \"\",\n+      location: \"\",\n+      startDate: \"\",\n+      endDate: \"\",\n+      deadline: \"\",\n+    });\n+    setShowModal(true);\n+  }\n+\n+  async function createEvent() {\n+    if (!form.title.trim() || !form.description.trim()) {\n+      toast.warn(\"Title and Description are required\");\n+      return;\n+    }\n+\n+    setCreating(true);\n     try {\n-      setLoading(true);\n+      const payload = {\n+        title: form.title.trim(),\n+        description: form.description.trim(),\n+        location: form.location?.trim() || \"\",\n+        startDate: form.startDate || null,\n+        endDate: form.endDate || null,\n+        deadline: form.deadline || null,\n+      };\n \n-      /**\n-       * ✅ IMPORTANT: Endpoint you can adjust later\n-       * POST /api/listings/create  (type: event)\n-       * OR POST /api/listings\n-       */\n       const res = await axios.post(\n-        \"http://localhost:5000/api/listings\",\n-        { ...payload, type: \"event\" },\n-        {\n-          headers: {\n-            Authorization: `Bearer ${localStorage.getItem(\"token\") || \"\"}`,\n-          },\n-        }\n+        `${API_BASE}/api/publisher/dashboard/events`,\n+        payload,\n+        { headers: { ...authHeaders, \"Content-Type\": \"application/json\" } }\n       );\n \n-      toast.success(\"Event created! (Now waiting for admin approval)\");\n+      if (!res.data?.success) throw new Error(\"Create failed\");\n+\n+      toast.success(\"Event created (Pending approval)\");\n       setShowModal(false);\n \n-      // Option: refresh list after create\n-      // fetchEvents();\n-\n-      // For immediate UI add:\n-      const created = res.data?.listing || res.data?.event || null;\n-      if (created) setEvents((prev) => [created, ...prev]);\n-      else setEvents((prev) => [{ ...payload, status: \"pending\", _id: Date.now() }, ...prev]);\n-\n+      // refresh list\n+      setPage(1);\n+      await fetchEvents({ page: 1 });\n     } catch (err) {\n-      toast.error(err?.response?.data?.message || \"Failed to create event\");\n+      const msg =\n+        err?.response?.data?.message ||\n+        err?.message ||\n+        \"Failed to create event\";\n+      toast.error(msg);\n     } finally {\n-      setLoading(false);\n+      setCreating(false);\n     }\n   }\n \n+  function statusBadge(s) {\n+    const cls =\n+      s === \"approved\"\n+        ? \"badge text-bg-success\"\n+        : s === \"rejected\"\n+        ? \"badge text-bg-danger\"\n+        : \"badge text-bg-warning\";\n+    return <span className={cls}>{s}</span>;\n+  }\n+\n+  const from = total === 0 ? 0 : (page - 1) * limit + 1;\n+  const to = Math.min(page * limit, total);\n+\n   return (\n-    <div className=\"container-fluid\">\n+    <div className=\"w-100\">\n       {/* Header */}\n-      <div className=\"d-flex align-items-center justify-content-between mb-3\">\n+      <div className=\"d-flex justify-content-between align-items-center mb-3\">\n         <div>\n-          <h2 className=\"mb-1\">Events</h2>\n-          <p className=\"text-muted mb-0\">All your event listings will appear here.</p>\n+          <h2 className=\"mb-0\">Events</h2>\n+          <div className=\"text-muted\">Manage your published events</div>\n         </div>\n \n-        <button className=\"btn btn-success\" onClick={() => setShowModal(true)}>\n-          <i className=\"bi bi-plus-circle me-2\" />\n+        <button className=\"btn btn-primary\" onClick={openModal}>\n+          <i className=\"bi bi-plus-lg me-2\" />\n           Add New Event\n         </button>\n       </div>\n \n       {/* Filters */}\n-      <div className=\"card shadow-sm mb-3\">\n+      <div className=\"card mb-3 shadow-sm\">\n         <div className=\"card-body\">\n-          <div className=\"row g-2 align-items-center\">\n-            <div className=\"col-md-3\">\n-              <label className=\"form-label mb-1\">Status</label>\n+          <div className=\"row g-2 align-items-end\">\n+            <div className=\"col-12 col-md-3\">\n+              <label className=\"form-label\">Status</label>\n               <select\n                 className=\"form-select\"\n                 value={status}\n-                onChange={(e) => setStatus(e.target.value)}\n+                onChange={(e) => {\n+                  setPage(1);\n+                  setStatus(e.target.value);\n+                }}\n               >\n                 <option value=\"all\">All</option>\n                 <option value=\"pending\">Pending</option>\n                 <option value=\"approved\">Approved</option>\n                 <option value=\"rejected\">Rejected</option>\n               </select>\n             </div>\n \n-            <div className=\"col-md-6\">\n-              <label className=\"form-label mb-1\">Search</label>\n+            <div className=\"col-12 col-md-5\">\n+              <label className=\"form-label\">Search</label>\n               <input\n                 className=\"form-control\"\n                 placeholder=\"Search by title or location...\"\n-                value={search}\n-                onChange={(e) => setSearch(e.target.value)}\n+                value={q}\n+                onChange={(e) => setQ(e.target.value)}\n+                onKeyDown={(e) => e.key === \"Enter\" && onSearch()}\n               />\n             </div>\n \n-            <div className=\"col-md-3 d-flex gap-2 justify-content-end align-items-end\">\n-              <button className=\"btn btn-outline-secondary w-50\" onClick={fetchEvents}>\n-                <i className=\"bi bi-arrow-clockwise me-1\" />\n-                Refresh\n-              </button>\n-              <button\n-                className=\"btn btn-outline-dark w-50\"\n-                onClick={() => {\n-                  setSearch(\"\");\n-                  setStatus(\"all\");\n+            <div className=\"col-6 col-md-2\">\n+              <label className=\"form-label\">Per Page</label>\n+              <select\n+                className=\"form-select\"\n+                value={limit}\n+                onChange={(e) => {\n+                  setPage(1);\n+                  setLimit(parseInt(e.target.value, 10));\n                 }}\n               >\n+                <option value={5}>5</option>\n+                <option value={10}>10</option>\n+                <option value={20}>20</option>\n+                <option value={50}>50</option>\n+              </select>\n+            </div>\n+\n+            <div className=\"col-6 col-md-2 d-flex gap-2\">\n+              <button className=\"btn btn-outline-primary w-100\" onClick={onSearch}>\n+                Search\n+              </button>\n+              <button className=\"btn btn-outline-secondary w-100\" onClick={onReset}>\n                 Reset\n               </button>\n             </div>\n           </div>\n@@ -181,284 +249,218 @@\n       <div className=\"card shadow-sm\">\n         <div className=\"card-body\">\n           <div className=\"d-flex justify-content-between align-items-center mb-2\">\n             <div className=\"text-muted\">\n-              {filtered.length} event(s) found\n+              Showing <b>{from}</b> to <b>{to}</b> of <b>{total}</b>\n             </div>\n-\n-            {loading && (\n-              <div className=\"text-muted\">\n-                <span className=\"spinner-border spinner-border-sm me-2\" />\n-                Loading...\n-              </div>\n-            )}\n+            <button\n+              className=\"btn btn-sm btn-outline-secondary\"\n+              onClick={() => fetchEvents()}\n+              disabled={loading}\n+            >\n+              <i className=\"bi bi-arrow-clockwise me-1\" />\n+              Refresh\n+            </button>\n           </div>\n \n           <div className=\"table-responsive\">\n-            <table className=\"table table-hover align-middle\">\n-              <thead className=\"table-light\">\n+            <table className=\"table align-middle\">\n+              <thead>\n                 <tr>\n                   <th style={{ width: 70 }}>#</th>\n                   <th>Title</th>\n                   <th>Location</th>\n+                  <th>Status</th>\n                   <th>Dates</th>\n-                  <th>Status</th>\n-                  <th style={{ width: 160 }} className=\"text-end\">Actions</th>\n+                  <th>Created</th>\n                 </tr>\n               </thead>\n-\n               <tbody>\n-                {!paged.length ? (\n+                {loading ? (\n                   <tr>\n-                    <td colSpan=\"6\" className=\"text-center text-muted py-5\">\n+                    <td colSpan=\"6\" className=\"text-center py-4\">\n+                      Loading...\n+                    </td>\n+                  </tr>\n+                ) : events.length === 0 ? (\n+                  <tr>\n+                    <td colSpan=\"6\" className=\"text-center py-4 text-muted\">\n                       No events found.\n                     </td>\n                   </tr>\n                 ) : (\n-                  paged.map((e, idx) => (\n-                    <tr key={e._id || idx}>\n-                      <td>{(page - 1) * PAGE_SIZE + idx + 1}</td>\n-                      <td className=\"fw-semibold\">{e.title}</td>\n-                      <td>{e.location || \"-\"}</td>\n-                      <td className=\"text-muted\">\n-                        {formatDate(e.startDate)} → {formatDate(e.endDate)}\n+                  events.map((ev, idx) => (\n+                    <tr key={ev._id}>\n+                      <td>{(page - 1) * limit + idx + 1}</td>\n+                      <td>\n+                        <div className=\"fw-semibold\">{ev.title}</div>\n+                        <div className=\"text-muted small text-truncate\" style={{ maxWidth: 520 }}>\n+                          {ev.description}\n+                        </div>\n                       </td>\n-                      <td>{renderStatusBadge(e.status)}</td>\n-                      <td className=\"text-end\">\n-                        <button className=\"btn btn-sm btn-outline-primary me-2\">\n-                          View\n-                        </button>\n-                        <button className=\"btn btn-sm btn-outline-secondary\">\n-                          Edit\n-                        </button>\n+                      <td>{ev.location || \"-\"}</td>\n+                      <td>{statusBadge(ev.status)}</td>\n+                      <td className=\"small text-muted\">\n+                        <div>\n+                          <b>Start:</b>{\" \"}\n+                          {ev.startDate ? new Date(ev.startDate).toLocaleDateString() : \"-\"}\n+                        </div>\n+                        <div>\n+                          <b>End:</b>{\" \"}\n+                          {ev.endDate ? new Date(ev.endDate).toLocaleDateString() : \"-\"}\n+                        </div>\n+                        <div>\n+                          <b>Deadline:</b>{\" \"}\n+                          {ev.deadline ? new Date(ev.deadline).toLocaleDateString() : \"-\"}\n+                        </div>\n                       </td>\n+                      <td className=\"small text-muted\">\n+                        {ev.createdAt ? new Date(ev.createdAt).toLocaleString() : \"-\"}\n+                      </td>\n                     </tr>\n                   ))\n                 )}\n               </tbody>\n             </table>\n           </div>\n \n           {/* Pagination */}\n-          <div className=\"d-flex justify-content-between align-items-center mt-3\">\n-            <div className=\"text-muted\">\n-              Page {page} of {totalPages}\n-            </div>\n+          {pages > 1 && (\n+            <nav className=\"d-flex justify-content-end\">\n+              <ul className=\"pagination mb-0\">\n+                <li className={`page-item ${page === 1 ? \"disabled\" : \"\"}`}>\n+                  <button className=\"page-link\" onClick={() => setPage(page - 1)}>\n+                    Prev\n+                  </button>\n+                </li>\n \n-            <div className=\"btn-group\">\n-              <button\n-                className=\"btn btn-outline-secondary\"\n-                disabled={page === 1}\n-                onClick={() => setPage((p) => p - 1)}\n-              >\n-                Prev\n-              </button>\n-              <button\n-                className=\"btn btn-outline-secondary\"\n-                disabled={page === totalPages}\n-                onClick={() => setPage((p) => p + 1)}\n-              >\n-                Next\n-              </button>\n-            </div>\n-          </div>\n+                {Array.from({ length: pages }).slice(0, 7).map((_, i) => {\n+                  const p = i + 1;\n+                  return (\n+                    <li key={p} className={`page-item ${page === p ? \"active\" : \"\"}`}>\n+                      <button className=\"page-link\" onClick={() => setPage(p)}>\n+                        {p}\n+                      </button>\n+                    </li>\n+                  );\n+                })}\n \n-          <div className=\"small text-muted mt-3\">\n-            Note: New events are created as <b>Pending</b> until admin approves.\n-          </div>\n+                <li className={`page-item ${page === pages ? \"disabled\" : \"\"}`}>\n+                  <button className=\"page-link\" onClick={() => setPage(page + 1)}>\n+                    Next\n+                  </button>\n+                </li>\n+              </ul>\n+            </nav>\n+          )}\n         </div>\n       </div>\n \n-      {/* Create Modal */}\n+      {/* Add Event Modal */}\n       {showModal && (\n-        <CreateEventModal\n-          onClose={() => setShowModal(false)}\n-          onSubmit={handleCreateEvent}\n-        />\n-      )}\n+        <div className=\"modal show d-block\" tabIndex=\"-1\">\n+          <div className=\"modal-dialog modal-lg modal-dialog-centered\">\n+            <div className=\"modal-content\">\n+              <div className=\"modal-header\">\n+                <h5 className=\"modal-title\">Add New Event</h5>\n+                <button\n+                  type=\"button\"\n+                  className=\"btn-close\"\n+                  onClick={() => setShowModal(false)}\n+                />\n+              </div>\n \n-      <ToastContainer position=\"top-center\" />\n-    </div>\n-  );\n-}\n+              <div className=\"modal-body\">\n+                <div className=\"row g-3\">\n+                  <div className=\"col-12\">\n+                    <label className=\"form-label\">Title *</label>\n+                    <input\n+                      className=\"form-control\"\n+                      value={form.title}\n+                      onChange={(e) => setForm({ ...form, title: e.target.value })}\n+                      placeholder=\"e.g. Startup Pitch Night\"\n+                    />\n+                  </div>\n \n-/* ------------------ Helpers ------------------ */\n+                  <div className=\"col-12\">\n+                    <label className=\"form-label\">Description *</label>\n+                    <textarea\n+                      className=\"form-control\"\n+                      rows={4}\n+                      value={form.description}\n+                      onChange={(e) => setForm({ ...form, description: e.target.value })}\n+                      placeholder=\"Describe your event...\"\n+                    />\n+                  </div>\n \n-function renderStatusBadge(status = \"pending\") {\n-  const s = status.toLowerCase();\n-  const map = {\n-    pending: \"warning\",\n-    approved: \"success\",\n-    rejected: \"danger\",\n-  };\n-  const cls = map[s] || \"secondary\";\n-  return <span className={`badge bg-${cls}`}>{s}</span>;\n-}\n+                  <div className=\"col-12 col-md-6\">\n+                    <label className=\"form-label\">Location</label>\n+                    <input\n+                      className=\"form-control\"\n+                      value={form.location}\n+                      onChange={(e) => setForm({ ...form, location: e.target.value })}\n+                      placeholder=\"City / Venue\"\n+                    />\n+                  </div>\n \n-function formatDate(d) {\n-  if (!d) return \"-\";\n-  const dt = new Date(d);\n-  if (Number.isNaN(dt.getTime())) return \"-\";\n-  return dt.toLocaleDateString();\n-}\n+                  <div className=\"col-12 col-md-6\">\n+                    <label className=\"form-label\">Deadline</label>\n+                    <input\n+                      type=\"date\"\n+                      className=\"form-control\"\n+                      value={form.deadline}\n+                      onChange={(e) => setForm({ ...form, deadline: e.target.value })}\n+                    />\n+                  </div>\n \n-/* ------------------ Modal Component ------------------ */\n+                  <div className=\"col-12 col-md-6\">\n+                    <label className=\"form-label\">Start Date</label>\n+                    <input\n+                      type=\"date\"\n+                      className=\"form-control\"\n+                      value={form.startDate}\n+                      onChange={(e) => setForm({ ...form, startDate: e.target.value })}\n+                    />\n+                  </div>\n \n-function CreateEventModal({ onClose, onSubmit }) {\n-  const [form, setForm] = useState({\n-    title: \"\",\n-    location: \"\",\n-    startDate: \"\",\n-    endDate: \"\",\n-    deadline: \"\",\n-    description: \"\",\n-  });\n+                  <div className=\"col-12 col-md-6\">\n+                    <label className=\"form-label\">End Date</label>\n+                    <input\n+                      type=\"date\"\n+                      className=\"form-control\"\n+                      value={form.endDate}\n+                      onChange={(e) => setForm({ ...form, endDate: e.target.value })}\n+                    />\n+                  </div>\n+                </div>\n \n-  function setField(k, v) {\n-    setForm((p) => ({ ...p, [k]: v }));\n-  }\n+                <div className=\"alert alert-warning mt-3 mb-0\">\n+                  Note: New event will be <b>Pending</b> until admin approves.\n+                </div>\n+              </div>\n \n-  function submit() {\n-    if (!form.title.trim()) return toast.error(\"Title is required\");\n-    if (!form.startDate) return toast.error(\"Start date is required\");\n-    if (!form.endDate) return toast.error(\"End date is required\");\n-\n-    onSubmit(form);\n-  }\n-\n-  return (\n-    <div className=\"ventic-modal-backdrop\">\n-      <div className=\"ventic-modal card shadow\">\n-        <div className=\"card-body\">\n-          <div className=\"d-flex justify-content-between align-items-center mb-3\">\n-            <h5 className=\"mb-0\">Add New Event</h5>\n-            <button className=\"btn btn-light\" onClick={onClose}>\n-              <i className=\"bi bi-x-lg\" />\n-            </button>\n-          </div>\n-\n-          <div className=\"row g-3\">\n-            <div className=\"col-md-12\">\n-              <label className=\"form-label\">Event Title *</label>\n-              <input\n-                className=\"form-control\"\n-                value={form.title}\n-                onChange={(e) => setField(\"title\", e.target.value)}\n-                placeholder=\"e.g. Startup Pitch Night\"\n-              />\n+              <div className=\"modal-footer\">\n+                <button\n+                  className=\"btn btn-outline-secondary\"\n+                  onClick={() => setShowModal(false)}\n+                  disabled={creating}\n+                >\n+                  Cancel\n+                </button>\n+                <button className=\"btn btn-primary\" onClick={createEvent} disabled={creating}>\n+                  {creating ? \"Creating...\" : \"Create Event\"}\n+                </button>\n+              </div>\n             </div>\n-\n-            <div className=\"col-md-12\">\n-              <label className=\"form-label\">Location</label>\n-              <input\n-                className=\"form-control\"\n-                value={form.location}\n-                onChange={(e) => setField(\"location\", e.target.value)}\n-                placeholder=\"e.g. Chandigarh / Online\"\n-              />\n-            </div>\n-\n-            <div className=\"col-md-4\">\n-              <label className=\"form-label\">Start Date *</label>\n-              <input\n-                type=\"date\"\n-                className=\"form-control\"\n-                value={form.startDate}\n-                onChange={(e) => setField(\"startDate\", e.target.value)}\n-              />\n-            </div>\n-\n-            <div className=\"col-md-4\">\n-              <label className=\"form-label\">End Date *</label>\n-              <input\n-                type=\"date\"\n-                className=\"form-control\"\n-                value={form.endDate}\n-                onChange={(e) => setField(\"endDate\", e.target.value)}\n-              />\n-            </div>\n-\n-            <div className=\"col-md-4\">\n-              <label className=\"form-label\">Deadline</label>\n-              <input\n-                type=\"date\"\n-                className=\"form-control\"\n-                value={form.deadline}\n-                onChange={(e) => setField(\"deadline\", e.target.value)}\n-              />\n-            </div>\n-\n-            <div className=\"col-md-12\">\n-              <label className=\"form-label\">Description</label>\n-              <textarea\n-                className=\"form-control\"\n-                rows=\"4\"\n-                value={form.description}\n-                onChange={(e) => setField(\"description\", e.target.value)}\n-                placeholder=\"Short description...\"\n-              />\n-            </div>\n           </div>\n \n-          <div className=\"d-flex justify-content-end gap-2 mt-4\">\n-            <button className=\"btn btn-outline-secondary\" onClick={onClose}>\n-              Cancel\n-            </button>\n-            <button className=\"btn btn-success\" onClick={submit}>\n-              Create Event\n-            </button>\n-          </div>\n-\n-          <div className=\"small text-muted mt-3\">\n-            Event will go to <b>Pending</b> until approved by admin.\n-          </div>\n+          <div\n+            className=\"modal-backdrop show\"\n+            onClick={() => setShowModal(false)}\n+          />\n         </div>\n-      </div>\n+      )}\n \n-      {/* modal CSS inline (or move to ventic.css) */}\n-      <style>{`\n-        .ventic-modal-backdrop{\n-          position: fixed; inset: 0;\n-          background: rgba(0,0,0,.35);\n-          display: flex;\n-          align-items: center;\n-          justify-content: center;\n-          z-index: 9999;\n-          padding: 16px;\n-        }\n-        .ventic-modal{\n-          width: 100%;\n-          max-width: 720px;\n-          border-radius: 16px;\n-        }\n-      `}</style>\n+      <ToastContainer position=\"top-center\" />\n     </div>\n   );\n }\n-\n-/* ------------------ Sample Data ------------------ */\n-const sampleEvents = [\n-  {\n-    _id: 1,\n-    title: \"Startup Pitch Night\",\n-    location: \"Chandigarh\",\n-    startDate: \"2026-01-10\",\n-    endDate: \"2026-01-10\",\n-    status: \"approved\",\n-  },\n-  {\n-    _id: 2,\n-    title: \"Govt Innovation Program\",\n-    location: \"Online\",\n-    startDate: \"2026-01-15\",\n-    endDate: \"2026-01-20\",\n-    status: \"pending\",\n-  },\n-  {\n-    _id: 3,\n-    title: \"Investor Meetup\",\n-    location: \"Delhi\",\n-    startDate: \"2026-02-01\",\n-    endDate: \"2026-02-01\",\n-    status: \"rejected\",\n-  },\n-];\n"
                },
                {
                    "date": 1767958269291,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,466 +1,25 @@\n-import { useEffect, useMemo, useState } from \"react\";\n-import axios from \"axios\";\n-import { ToastContainer, toast } from \"react-toastify\";\n+import ListingManager from \"./ListingManager\";\n \n-const API_BASE =\n-  import.meta.env.VITE_API_URL?.replace(/\\/$/, \"\") || \"http://localhost:5000\";\n-\n-function getToken() {\n-  // keep it flexible\n-  return (\n-    localStorage.getItem(\"token\") ||\n-    localStorage.getItem(\"accessToken\") ||\n-    localStorage.getItem(\"jwt\") ||\n-    \"\"\n-  );\n-}\n-\n export default function Events() {\n-  const [loading, setLoading] = useState(false);\n-\n-  // list state\n-  const [events, setEvents] = useState([]);\n-  const [total, setTotal] = useState(0);\n-  const [pages, setPages] = useState(1);\n-\n-  // filters\n-  const [status, setStatus] = useState(\"all\"); // all|pending|approved|rejected\n-  const [q, setQ] = useState(\"\");\n-  const [page, setPage] = useState(1);\n-  const [limit, setLimit] = useState(10);\n-\n-  // modal state\n-  const [showModal, setShowModal] = useState(false);\n-  const [creating, setCreating] = useState(false);\n-\n-  // create form\n-  const [form, setForm] = useState({\n-    title: \"\",\n-    description: \"\",\n-    location: \"\",\n-    startDate: \"\",\n-    endDate: \"\",\n-    deadline: \"\",\n-  });\n-\n-  const authHeaders = useMemo(() => {\n-    const token = getToken();\n-    return token ? { Authorization: `Bearer ${token}` } : {};\n-  }, []);\n-\n-  async function fetchEvents(override = {}) {\n-    setLoading(true);\n-    try {\n-      const res = await axios.get(`${API_BASE}/api/publisher/dashboard/events`, {\n-        headers: authHeaders,\n-        params: {\n-          status: override.status ?? status,\n-          q: override.q ?? q,\n-          page: override.page ?? page,\n-          limit: override.limit ?? limit,\n-        },\n-      });\n-\n-      if (!res.data?.success) throw new Error(\"Request failed\");\n-\n-      setEvents(res.data.events || []);\n-      setTotal(res.data.total || 0);\n-      setPages(res.data.pages || 1);\n-    } catch (err) {\n-      const msg =\n-        err?.response?.data?.message ||\n-        err?.message ||\n-        \"Failed to load events\";\n-      toast.error(msg);\n-\n-      // Optional: if token invalid, kick to login\n-      if (err?.response?.status === 401) {\n-        // window.location.href = \"/\";\n-      }\n-    } finally {\n-      setLoading(false);\n-    }\n-  }\n-\n-  useEffect(() => {\n-    fetchEvents();\n-    // eslint-disable-next-line react-hooks/exhaustive-deps\n-  }, [status, page, limit]);\n-\n-  // search on enter / button\n-  function onSearch() {\n-    setPage(1);\n-    fetchEvents({ page: 1, q });\n-  }\n-\n-  function onReset() {\n-    setStatus(\"all\");\n-    setQ(\"\");\n-    setPage(1);\n-    setLimit(10);\n-    // fetch will auto run because of deps, but call once for q reset:\n-    fetchEvents({ status: \"all\", q: \"\", page: 1, limit: 10 });\n-  }\n-\n-  function openModal() {\n-    setForm({\n-      title: \"\",\n-      description: \"\",\n-      location: \"\",\n-      startDate: \"\",\n-      endDate: \"\",\n-      deadline: \"\",\n-    });\n-    setShowModal(true);\n-  }\n-\n-  async function createEvent() {\n-    if (!form.title.trim() || !form.description.trim()) {\n-      toast.warn(\"Title and Description are required\");\n-      return;\n-    }\n-\n-    setCreating(true);\n-    try {\n-      const payload = {\n-        title: form.title.trim(),\n-        description: form.description.trim(),\n-        location: form.location?.trim() || \"\",\n-        startDate: form.startDate || null,\n-        endDate: form.endDate || null,\n-        deadline: form.deadline || null,\n-      };\n-\n-      const res = await axios.post(\n-        `${API_BASE}/api/publisher/dashboard/events`,\n-        payload,\n-        { headers: { ...authHeaders, \"Content-Type\": \"application/json\" } }\n-      );\n-\n-      if (!res.data?.success) throw new Error(\"Create failed\");\n-\n-      toast.success(\"Event created (Pending approval)\");\n-      setShowModal(false);\n-\n-      // refresh list\n-      setPage(1);\n-      await fetchEvents({ page: 1 });\n-    } catch (err) {\n-      const msg =\n-        err?.response?.data?.message ||\n-        err?.message ||\n-        \"Failed to create event\";\n-      toast.error(msg);\n-    } finally {\n-      setCreating(false);\n-    }\n-  }\n-\n-  function statusBadge(s) {\n-    const cls =\n-      s === \"approved\"\n-        ? \"badge text-bg-success\"\n-        : s === \"rejected\"\n-        ? \"badge text-bg-danger\"\n-        : \"badge text-bg-warning\";\n-    return <span className={cls}>{s}</span>;\n-  }\n-\n-  const from = total === 0 ? 0 : (page - 1) * limit + 1;\n-  const to = Math.min(page * limit, total);\n-\n   return (\n-    <div className=\"w-100\">\n-      {/* Header */}\n-      <div className=\"d-flex justify-content-between align-items-center mb-3\">\n-        <div>\n-          <h2 className=\"mb-0\">Events</h2>\n-          <div className=\"text-muted\">Manage your published events</div>\n-        </div>\n-\n-        <button className=\"btn btn-primary\" onClick={openModal}>\n-          <i className=\"bi bi-plus-lg me-2\" />\n-          Add New Event\n-        </button>\n-      </div>\n-\n-      {/* Filters */}\n-      <div className=\"card mb-3 shadow-sm\">\n-        <div className=\"card-body\">\n-          <div className=\"row g-2 align-items-end\">\n-            <div className=\"col-12 col-md-3\">\n-              <label className=\"form-label\">Status</label>\n-              <select\n-                className=\"form-select\"\n-                value={status}\n-                onChange={(e) => {\n-                  setPage(1);\n-                  setStatus(e.target.value);\n-                }}\n-              >\n-                <option value=\"all\">All</option>\n-                <option value=\"pending\">Pending</option>\n-                <option value=\"approved\">Approved</option>\n-                <option value=\"rejected\">Rejected</option>\n-              </select>\n-            </div>\n-\n-            <div className=\"col-12 col-md-5\">\n-              <label className=\"form-label\">Search</label>\n-              <input\n-                className=\"form-control\"\n-                placeholder=\"Search by title or location...\"\n-                value={q}\n-                onChange={(e) => setQ(e.target.value)}\n-                onKeyDown={(e) => e.key === \"Enter\" && onSearch()}\n-              />\n-            </div>\n-\n-            <div className=\"col-6 col-md-2\">\n-              <label className=\"form-label\">Per Page</label>\n-              <select\n-                className=\"form-select\"\n-                value={limit}\n-                onChange={(e) => {\n-                  setPage(1);\n-                  setLimit(parseInt(e.target.value, 10));\n-                }}\n-              >\n-                <option value={5}>5</option>\n-                <option value={10}>10</option>\n-                <option value={20}>20</option>\n-                <option value={50}>50</option>\n-              </select>\n-            </div>\n-\n-            <div className=\"col-6 col-md-2 d-flex gap-2\">\n-              <button className=\"btn btn-outline-primary w-100\" onClick={onSearch}>\n-                Search\n-              </button>\n-              <button className=\"btn btn-outline-secondary w-100\" onClick={onReset}>\n-                Reset\n-              </button>\n-            </div>\n-          </div>\n-        </div>\n-      </div>\n-\n-      {/* Table */}\n-      <div className=\"card shadow-sm\">\n-        <div className=\"card-body\">\n-          <div className=\"d-flex justify-content-between align-items-center mb-2\">\n-            <div className=\"text-muted\">\n-              Showing <b>{from}</b> to <b>{to}</b> of <b>{total}</b>\n-            </div>\n-            <button\n-              className=\"btn btn-sm btn-outline-secondary\"\n-              onClick={() => fetchEvents()}\n-              disabled={loading}\n-            >\n-              <i className=\"bi bi-arrow-clockwise me-1\" />\n-              Refresh\n-            </button>\n-          </div>\n-\n-          <div className=\"table-responsive\">\n-            <table className=\"table align-middle\">\n-              <thead>\n-                <tr>\n-                  <th style={{ width: 70 }}>#</th>\n-                  <th>Title</th>\n-                  <th>Location</th>\n-                  <th>Status</th>\n-                  <th>Dates</th>\n-                  <th>Created</th>\n-                </tr>\n-              </thead>\n-              <tbody>\n-                {loading ? (\n-                  <tr>\n-                    <td colSpan=\"6\" className=\"text-center py-4\">\n-                      Loading...\n-                    </td>\n-                  </tr>\n-                ) : events.length === 0 ? (\n-                  <tr>\n-                    <td colSpan=\"6\" className=\"text-center py-4 text-muted\">\n-                      No events found.\n-                    </td>\n-                  </tr>\n-                ) : (\n-                  events.map((ev, idx) => (\n-                    <tr key={ev._id}>\n-                      <td>{(page - 1) * limit + idx + 1}</td>\n-                      <td>\n-                        <div className=\"fw-semibold\">{ev.title}</div>\n-                        <div className=\"text-muted small text-truncate\" style={{ maxWidth: 520 }}>\n-                          {ev.description}\n-                        </div>\n-                      </td>\n-                      <td>{ev.location || \"-\"}</td>\n-                      <td>{statusBadge(ev.status)}</td>\n-                      <td className=\"small text-muted\">\n-                        <div>\n-                          <b>Start:</b>{\" \"}\n-                          {ev.startDate ? new Date(ev.startDate).toLocaleDateString() : \"-\"}\n-                        </div>\n-                        <div>\n-                          <b>End:</b>{\" \"}\n-                          {ev.endDate ? new Date(ev.endDate).toLocaleDateString() : \"-\"}\n-                        </div>\n-                        <div>\n-                          <b>Deadline:</b>{\" \"}\n-                          {ev.deadline ? new Date(ev.deadline).toLocaleDateString() : \"-\"}\n-                        </div>\n-                      </td>\n-                      <td className=\"small text-muted\">\n-                        {ev.createdAt ? new Date(ev.createdAt).toLocaleString() : \"-\"}\n-                      </td>\n-                    </tr>\n-                  ))\n-                )}\n-              </tbody>\n-            </table>\n-          </div>\n-\n-          {/* Pagination */}\n-          {pages > 1 && (\n-            <nav className=\"d-flex justify-content-end\">\n-              <ul className=\"pagination mb-0\">\n-                <li className={`page-item ${page === 1 ? \"disabled\" : \"\"}`}>\n-                  <button className=\"page-link\" onClick={() => setPage(page - 1)}>\n-                    Prev\n-                  </button>\n-                </li>\n-\n-                {Array.from({ length: pages }).slice(0, 7).map((_, i) => {\n-                  const p = i + 1;\n-                  return (\n-                    <li key={p} className={`page-item ${page === p ? \"active\" : \"\"}`}>\n-                      <button className=\"page-link\" onClick={() => setPage(p)}>\n-                        {p}\n-                      </button>\n-                    </li>\n-                  );\n-                })}\n-\n-                <li className={`page-item ${page === pages ? \"disabled\" : \"\"}`}>\n-                  <button className=\"page-link\" onClick={() => setPage(page + 1)}>\n-                    Next\n-                  </button>\n-                </li>\n-              </ul>\n-            </nav>\n-          )}\n-        </div>\n-      </div>\n-\n-      {/* Add Event Modal */}\n-      {showModal && (\n-        <div className=\"modal show d-block\" tabIndex=\"-1\">\n-          <div className=\"modal-dialog modal-lg modal-dialog-centered\">\n-            <div className=\"modal-content\">\n-              <div className=\"modal-header\">\n-                <h5 className=\"modal-title\">Add New Event</h5>\n-                <button\n-                  type=\"button\"\n-                  className=\"btn-close\"\n-                  onClick={() => setShowModal(false)}\n-                />\n-              </div>\n-\n-              <div className=\"modal-body\">\n-                <div className=\"row g-3\">\n-                  <div className=\"col-12\">\n-                    <label className=\"form-label\">Title *</label>\n-                    <input\n-                      className=\"form-control\"\n-                      value={form.title}\n-                      onChange={(e) => setForm({ ...form, title: e.target.value })}\n-                      placeholder=\"e.g. Startup Pitch Night\"\n-                    />\n-                  </div>\n-\n-                  <div className=\"col-12\">\n-                    <label className=\"form-label\">Description *</label>\n-                    <textarea\n-                      className=\"form-control\"\n-                      rows={4}\n-                      value={form.description}\n-                      onChange={(e) => setForm({ ...form, description: e.target.value })}\n-                      placeholder=\"Describe your event...\"\n-                    />\n-                  </div>\n-\n-                  <div className=\"col-12 col-md-6\">\n-                    <label className=\"form-label\">Location</label>\n-                    <input\n-                      className=\"form-control\"\n-                      value={form.location}\n-                      onChange={(e) => setForm({ ...form, location: e.target.value })}\n-                      placeholder=\"City / Venue\"\n-                    />\n-                  </div>\n-\n-                  <div className=\"col-12 col-md-6\">\n-                    <label className=\"form-label\">Deadline</label>\n-                    <input\n-                      type=\"date\"\n-                      className=\"form-control\"\n-                      value={form.deadline}\n-                      onChange={(e) => setForm({ ...form, deadline: e.target.value })}\n-                    />\n-                  </div>\n-\n-                  <div className=\"col-12 col-md-6\">\n-                    <label className=\"form-label\">Start Date</label>\n-                    <input\n-                      type=\"date\"\n-                      className=\"form-control\"\n-                      value={form.startDate}\n-                      onChange={(e) => setForm({ ...form, startDate: e.target.value })}\n-                    />\n-                  </div>\n-\n-                  <div className=\"col-12 col-md-6\">\n-                    <label className=\"form-label\">End Date</label>\n-                    <input\n-                      type=\"date\"\n-                      className=\"form-control\"\n-                      value={form.endDate}\n-                      onChange={(e) => setForm({ ...form, endDate: e.target.value })}\n-                    />\n-                  </div>\n-                </div>\n-\n-                <div className=\"alert alert-warning mt-3 mb-0\">\n-                  Note: New event will be <b>Pending</b> until admin approves.\n-                </div>\n-              </div>\n-\n-              <div className=\"modal-footer\">\n-                <button\n-                  className=\"btn btn-outline-secondary\"\n-                  onClick={() => setShowModal(false)}\n-                  disabled={creating}\n-                >\n-                  Cancel\n-                </button>\n-                <button className=\"btn btn-primary\" onClick={createEvent} disabled={creating}>\n-                  {creating ? \"Creating...\" : \"Create Event\"}\n-                </button>\n-              </div>\n-            </div>\n-          </div>\n-\n-          <div\n-            className=\"modal-backdrop show\"\n-            onClick={() => setShowModal(false)}\n-          />\n-        </div>\n-      )}\n-\n-      <ToastContainer position=\"top-center\" />\n-    </div>\n+    <ListingManager\n+      typeKey=\"events\"\n+      title=\"Events\"\n+      subtitle=\"All your event listings (mock data for now)\"\n+      addButtonText=\"Add New Event\"\n+      searchKeys={[\"title\", \"location\"]}\n+      fields={[\n+        { name: \"title\", label: \"Event Title\", required: true, col: \"col-12\" },\n+        { name: \"location\", label: \"Location\", col: \"col-md-6\" },\n+        { name: \"startDate\", label: \"Start Date\", type: \"date\", col: \"col-md-6\" },\n+        { name: \"endDate\", label: \"End Date\", type: \"date\", col: \"col-md-6\" },\n+        { name: \"deadline\", label: \"Deadline\", type: \"date\", col: \"col-md-6\" },\n+        { name: \"description\", label: \"Description\", type: \"textarea\", required: true, col: \"col-12\" },\n+      ]}\n+      sampleData={[\n+        { _id: \"e1\", title: \"Startup Pitch Night\", location: \"Chandigarh\", startDate: \"2026-01-15\", endDate: \"2026-01-15\", deadline: \"2026-01-12\", status: \"approved\", createdAt: new Date().toISOString() },\n+        { _id: \"e2\", title: \"Founder Meetup\", location: \"Delhi\", startDate: \"2026-01-22\", endDate: \"2026-01-22\", status: \"pending\", createdAt: new Date().toISOString() },\n+      ]}\n+    />\n   );\n }\n"
                }
            ],
            "date": 1767933428092,
            "name": "Commit-0",
            "content": "import { useEffect, useMemo, useState } from \"react\";\nimport { ToastContainer, toast } from \"react-toastify\";\nimport \"react-toastify/dist/ReactToastify.css\";\n\n// If you already have axios client, use that.\n// Otherwise install axios: npm i axios\nimport axios from \"axios\";\n\nconst PAGE_SIZE = 8;\n\nexport default function Events() {\n  const [loading, setLoading] = useState(false);\n  const [events, setEvents] = useState([]);\n\n  const [search, setSearch] = useState(\"\");\n  const [status, setStatus] = useState(\"all\");\n  const [page, setPage] = useState(1);\n\n  const [showModal, setShowModal] = useState(false);\n\n  // ✅ fetch events\n  useEffect(() => {\n    fetchEvents();\n    // eslint-disable-next-line\n  }, []);\n\n  async function fetchEvents() {\n    try {\n      setLoading(true);\n\n      /**\n       * ✅ IMPORTANT: Endpoint you can adjust later\n       * Option A (recommended): GET /api/publisher/listings?type=event\n       * Option B: GET /api/listings/my?type=event\n       */\n      const res = await axios.get(\"http://localhost:5000/api/publisher/dashboard/events\", {\n        headers: {\n          // If you are using auth token:\n          Authorization: `Bearer ${localStorage.getItem(\"token\") || \"\"}`,\n        },\n      });\n\n      const list = res.data?.events || res.data?.data || [];\n      setEvents(list);\n    } catch (err) {\n      // fallback sample so UI stays visible\n      setEvents(sampleEvents);\n      toast.error(\"Could not load events from API. Showing sample data.\");\n    } finally {\n      setLoading(false);\n    }\n  }\n\n  // ✅ filtering + search\n  const filtered = useMemo(() => {\n    const q = search.trim().toLowerCase();\n\n    return events\n      .filter((e) => (status === \"all\" ? true : (e.status || \"pending\") === status))\n      .filter((e) => {\n        if (!q) return true;\n        return (\n          (e.title || \"\").toLowerCase().includes(q) ||\n          (e.location || \"\").toLowerCase().includes(q)\n        );\n      });\n  }, [events, status, search]);\n\n  // ✅ pagination\n  const totalPages = Math.max(1, Math.ceil(filtered.length / PAGE_SIZE));\n  const paged = useMemo(() => {\n    const start = (page - 1) * PAGE_SIZE;\n    return filtered.slice(start, start + PAGE_SIZE);\n  }, [filtered, page]);\n\n  // reset page when filters change\n  useEffect(() => {\n    setPage(1);\n  }, [search, status]);\n\n  async function handleCreateEvent(payload) {\n    try {\n      setLoading(true);\n\n      /**\n       * ✅ IMPORTANT: Endpoint you can adjust later\n       * POST /api/listings/create  (type: event)\n       * OR POST /api/listings\n       */\n      const res = await axios.post(\n        \"http://localhost:5000/api/listings\",\n        { ...payload, type: \"event\" },\n        {\n          headers: {\n            Authorization: `Bearer ${localStorage.getItem(\"token\") || \"\"}`,\n          },\n        }\n      );\n\n      toast.success(\"Event created! (Now waiting for admin approval)\");\n      setShowModal(false);\n\n      // Option: refresh list after create\n      // fetchEvents();\n\n      // For immediate UI add:\n      const created = res.data?.listing || res.data?.event || null;\n      if (created) setEvents((prev) => [created, ...prev]);\n      else setEvents((prev) => [{ ...payload, status: \"pending\", _id: Date.now() }, ...prev]);\n\n    } catch (err) {\n      toast.error(err?.response?.data?.message || \"Failed to create event\");\n    } finally {\n      setLoading(false);\n    }\n  }\n\n  return (\n    <div className=\"container-fluid\">\n      {/* Header */}\n      <div className=\"d-flex align-items-center justify-content-between mb-3\">\n        <div>\n          <h2 className=\"mb-1\">Events</h2>\n          <p className=\"text-muted mb-0\">All your event listings will appear here.</p>\n        </div>\n\n        <button className=\"btn btn-success\" onClick={() => setShowModal(true)}>\n          <i className=\"bi bi-plus-circle me-2\" />\n          Add New Event\n        </button>\n      </div>\n\n      {/* Filters */}\n      <div className=\"card shadow-sm mb-3\">\n        <div className=\"card-body\">\n          <div className=\"row g-2 align-items-center\">\n            <div className=\"col-md-3\">\n              <label className=\"form-label mb-1\">Status</label>\n              <select\n                className=\"form-select\"\n                value={status}\n                onChange={(e) => setStatus(e.target.value)}\n              >\n                <option value=\"all\">All</option>\n                <option value=\"pending\">Pending</option>\n                <option value=\"approved\">Approved</option>\n                <option value=\"rejected\">Rejected</option>\n              </select>\n            </div>\n\n            <div className=\"col-md-6\">\n              <label className=\"form-label mb-1\">Search</label>\n              <input\n                className=\"form-control\"\n                placeholder=\"Search by title or location...\"\n                value={search}\n                onChange={(e) => setSearch(e.target.value)}\n              />\n            </div>\n\n            <div className=\"col-md-3 d-flex gap-2 justify-content-end align-items-end\">\n              <button className=\"btn btn-outline-secondary w-50\" onClick={fetchEvents}>\n                <i className=\"bi bi-arrow-clockwise me-1\" />\n                Refresh\n              </button>\n              <button\n                className=\"btn btn-outline-dark w-50\"\n                onClick={() => {\n                  setSearch(\"\");\n                  setStatus(\"all\");\n                }}\n              >\n                Reset\n              </button>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      {/* Table */}\n      <div className=\"card shadow-sm\">\n        <div className=\"card-body\">\n          <div className=\"d-flex justify-content-between align-items-center mb-2\">\n            <div className=\"text-muted\">\n              {filtered.length} event(s) found\n            </div>\n\n            {loading && (\n              <div className=\"text-muted\">\n                <span className=\"spinner-border spinner-border-sm me-2\" />\n                Loading...\n              </div>\n            )}\n          </div>\n\n          <div className=\"table-responsive\">\n            <table className=\"table table-hover align-middle\">\n              <thead className=\"table-light\">\n                <tr>\n                  <th style={{ width: 70 }}>#</th>\n                  <th>Title</th>\n                  <th>Location</th>\n                  <th>Dates</th>\n                  <th>Status</th>\n                  <th style={{ width: 160 }} className=\"text-end\">Actions</th>\n                </tr>\n              </thead>\n\n              <tbody>\n                {!paged.length ? (\n                  <tr>\n                    <td colSpan=\"6\" className=\"text-center text-muted py-5\">\n                      No events found.\n                    </td>\n                  </tr>\n                ) : (\n                  paged.map((e, idx) => (\n                    <tr key={e._id || idx}>\n                      <td>{(page - 1) * PAGE_SIZE + idx + 1}</td>\n                      <td className=\"fw-semibold\">{e.title}</td>\n                      <td>{e.location || \"-\"}</td>\n                      <td className=\"text-muted\">\n                        {formatDate(e.startDate)} → {formatDate(e.endDate)}\n                      </td>\n                      <td>{renderStatusBadge(e.status)}</td>\n                      <td className=\"text-end\">\n                        <button className=\"btn btn-sm btn-outline-primary me-2\">\n                          View\n                        </button>\n                        <button className=\"btn btn-sm btn-outline-secondary\">\n                          Edit\n                        </button>\n                      </td>\n                    </tr>\n                  ))\n                )}\n              </tbody>\n            </table>\n          </div>\n\n          {/* Pagination */}\n          <div className=\"d-flex justify-content-between align-items-center mt-3\">\n            <div className=\"text-muted\">\n              Page {page} of {totalPages}\n            </div>\n\n            <div className=\"btn-group\">\n              <button\n                className=\"btn btn-outline-secondary\"\n                disabled={page === 1}\n                onClick={() => setPage((p) => p - 1)}\n              >\n                Prev\n              </button>\n              <button\n                className=\"btn btn-outline-secondary\"\n                disabled={page === totalPages}\n                onClick={() => setPage((p) => p + 1)}\n              >\n                Next\n              </button>\n            </div>\n          </div>\n\n          <div className=\"small text-muted mt-3\">\n            Note: New events are created as <b>Pending</b> until admin approves.\n          </div>\n        </div>\n      </div>\n\n      {/* Create Modal */}\n      {showModal && (\n        <CreateEventModal\n          onClose={() => setShowModal(false)}\n          onSubmit={handleCreateEvent}\n        />\n      )}\n\n      <ToastContainer position=\"top-center\" />\n    </div>\n  );\n}\n\n/* ------------------ Helpers ------------------ */\n\nfunction renderStatusBadge(status = \"pending\") {\n  const s = status.toLowerCase();\n  const map = {\n    pending: \"warning\",\n    approved: \"success\",\n    rejected: \"danger\",\n  };\n  const cls = map[s] || \"secondary\";\n  return <span className={`badge bg-${cls}`}>{s}</span>;\n}\n\nfunction formatDate(d) {\n  if (!d) return \"-\";\n  const dt = new Date(d);\n  if (Number.isNaN(dt.getTime())) return \"-\";\n  return dt.toLocaleDateString();\n}\n\n/* ------------------ Modal Component ------------------ */\n\nfunction CreateEventModal({ onClose, onSubmit }) {\n  const [form, setForm] = useState({\n    title: \"\",\n    location: \"\",\n    startDate: \"\",\n    endDate: \"\",\n    deadline: \"\",\n    description: \"\",\n  });\n\n  function setField(k, v) {\n    setForm((p) => ({ ...p, [k]: v }));\n  }\n\n  function submit() {\n    if (!form.title.trim()) return toast.error(\"Title is required\");\n    if (!form.startDate) return toast.error(\"Start date is required\");\n    if (!form.endDate) return toast.error(\"End date is required\");\n\n    onSubmit(form);\n  }\n\n  return (\n    <div className=\"ventic-modal-backdrop\">\n      <div className=\"ventic-modal card shadow\">\n        <div className=\"card-body\">\n          <div className=\"d-flex justify-content-between align-items-center mb-3\">\n            <h5 className=\"mb-0\">Add New Event</h5>\n            <button className=\"btn btn-light\" onClick={onClose}>\n              <i className=\"bi bi-x-lg\" />\n            </button>\n          </div>\n\n          <div className=\"row g-3\">\n            <div className=\"col-md-12\">\n              <label className=\"form-label\">Event Title *</label>\n              <input\n                className=\"form-control\"\n                value={form.title}\n                onChange={(e) => setField(\"title\", e.target.value)}\n                placeholder=\"e.g. Startup Pitch Night\"\n              />\n            </div>\n\n            <div className=\"col-md-12\">\n              <label className=\"form-label\">Location</label>\n              <input\n                className=\"form-control\"\n                value={form.location}\n                onChange={(e) => setField(\"location\", e.target.value)}\n                placeholder=\"e.g. Chandigarh / Online\"\n              />\n            </div>\n\n            <div className=\"col-md-4\">\n              <label className=\"form-label\">Start Date *</label>\n              <input\n                type=\"date\"\n                className=\"form-control\"\n                value={form.startDate}\n                onChange={(e) => setField(\"startDate\", e.target.value)}\n              />\n            </div>\n\n            <div className=\"col-md-4\">\n              <label className=\"form-label\">End Date *</label>\n              <input\n                type=\"date\"\n                className=\"form-control\"\n                value={form.endDate}\n                onChange={(e) => setField(\"endDate\", e.target.value)}\n              />\n            </div>\n\n            <div className=\"col-md-4\">\n              <label className=\"form-label\">Deadline</label>\n              <input\n                type=\"date\"\n                className=\"form-control\"\n                value={form.deadline}\n                onChange={(e) => setField(\"deadline\", e.target.value)}\n              />\n            </div>\n\n            <div className=\"col-md-12\">\n              <label className=\"form-label\">Description</label>\n              <textarea\n                className=\"form-control\"\n                rows=\"4\"\n                value={form.description}\n                onChange={(e) => setField(\"description\", e.target.value)}\n                placeholder=\"Short description...\"\n              />\n            </div>\n          </div>\n\n          <div className=\"d-flex justify-content-end gap-2 mt-4\">\n            <button className=\"btn btn-outline-secondary\" onClick={onClose}>\n              Cancel\n            </button>\n            <button className=\"btn btn-success\" onClick={submit}>\n              Create Event\n            </button>\n          </div>\n\n          <div className=\"small text-muted mt-3\">\n            Event will go to <b>Pending</b> until approved by admin.\n          </div>\n        </div>\n      </div>\n\n      {/* modal CSS inline (or move to ventic.css) */}\n      <style>{`\n        .ventic-modal-backdrop{\n          position: fixed; inset: 0;\n          background: rgba(0,0,0,.35);\n          display: flex;\n          align-items: center;\n          justify-content: center;\n          z-index: 9999;\n          padding: 16px;\n        }\n        .ventic-modal{\n          width: 100%;\n          max-width: 720px;\n          border-radius: 16px;\n        }\n      `}</style>\n    </div>\n  );\n}\n\n/* ------------------ Sample Data ------------------ */\nconst sampleEvents = [\n  {\n    _id: 1,\n    title: \"Startup Pitch Night\",\n    location: \"Chandigarh\",\n    startDate: \"2026-01-10\",\n    endDate: \"2026-01-10\",\n    status: \"approved\",\n  },\n  {\n    _id: 2,\n    title: \"Govt Innovation Program\",\n    location: \"Online\",\n    startDate: \"2026-01-15\",\n    endDate: \"2026-01-20\",\n    status: \"pending\",\n  },\n  {\n    _id: 3,\n    title: \"Investor Meetup\",\n    location: \"Delhi\",\n    startDate: \"2026-02-01\",\n    endDate: \"2026-02-01\",\n    status: \"rejected\",\n  },\n];\n"
        }
    ]
}